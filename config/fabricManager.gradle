/***
 * Fabric  functions
 */

ext.fabricGroupsFile = rootProject.file('config/fabricGroups.txt')


task setFabricDeployGroup {
	doLast {
		def group = findProperty('group')
		if (fabricGroupsFile.canRead()) {

			fabricGroupsFile.withWriter { w ->
				w << group
			}
		} else {
			throw new FileNotFoundException("Could not find fabricGroups.txt")
		}
	}
}

task deployDevAppToFabric() {
	dependsOn 'assembleDevRelease'
	finalizedBy 'crashlyticsUploadDistributionDevRelease'
}

task deployStageAppToFabric() {
	dependsOn 'assembleStageRelease'
	finalizedBy 'crashlyticsUploadDistributionStageRelease'
}

task deployProductionAppToFabric() {
	dependsOn 'assembleProdRelease'
	finalizedBy 'crashlyticsUploadDistributionProdRelease'
}



